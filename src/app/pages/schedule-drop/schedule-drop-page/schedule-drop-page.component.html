<div class="banner_section">
  <div class="inner_banner_section"></div>
</div>

<div class="brands_section_area">
  <div class="inner_brands_section">
    <div class="container">
      <div class="row">
        <div class="col-xl-12 service-content">
          <div class="main_brands_area">
            <div class="inner_breand_logo">
              <h2 class="heading">Schedule Drop</h2>
              <div class="choose_car_box">
                <div class="choose_car_box_main">
                  <div class="heading_section">
                    <div class="container">
                      <div class="row">
                        <div class="col-xl-6 col-12">
                          <div class="card">
                            <div class="card-body">
                              <div class="d-flex" style="gap: 15px">
                                <div>
                                  <img
                                    style="height: 17vh"
                                    src="https://www.freepnglogos.com/uploads/mercedes-logo-png/mercedes-logo-mercedes-benz-logo-png-transparent-svg-vector-bie-13.png"
                                    alt=""
                                  />
                                </div>
                                <div style="display: flex; align-items: center; justify-content: center;">
                                  <div class="booking_details">
                                    <b><span>{{bookingData.booking?.vehicle?.cv_plate_number}}</span></b> <br>
                                    <span>{{bookingData?.booking?.vehicle?.cv_make}} {{bookingData?.booking?.vehicle.cv_model}} </span> <br>
                                    <span>{{bookingData?.booking?.vehicle.cv_variant}} ({{bookingData?.booking?.vehicle.cv_year}})</span> <br>   
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-xl-6 col-12">
                          <div class="card">
                            <div class="card-body">
                              <div class="d-flex" style="gap: 15px">
                                <div>
                                  <img
                                    style="height: 17vh"
                                    src="./assets/images/service_list_icon.png"
                                    alt=""
                                  />
                                </div>
                                <div style="display: flex; align-items: center; justify-content: center;">
                                  <div class="booking_details">
                                    <b><span>{{bookingData.booking?.bk_number}}</span></b> <br>
                                    <span>{{bookingData?.booking?.booking_package?.pkg_name}}</span> <br> 
                                    <span>{{bookingData?.booking?.bk_booking_date}}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-xl-6 mt-3 col-12">
                          <div class="card">
                            <div class="card-body">
                              <div
                                style="
                                  display: flex;
                                  justify-content: space-between;
                                  margin-top: 20px;
                                "
                                class="p-2"
                              >
                                <div>
                                  <h5>Current Drop Location</h5>
                                </div>

                                <div>
                                  <h5 class="add_new">
                                    Add New
                                    <i class="fa fa-plus-circle"></i>
                                  </h5>
                                </div>
                              </div>

                              <div class="p-4">
                                <ng-select [(ngModel)]="dropAddressId" (change)="selectAddress()">
                              <ng-option value="0" >Select Pickup Address</ng-option>
                              <ng-option *ngFor="let eachaddress of custAdresses"
                                [value]="eachaddress.cad_id">{{eachaddress.cad_landmark}} {{eachaddress.cad_address}}</ng-option>
                            </ng-select>
                              </div>
                            </div>
                          </div>
                        </div> 

                        <div class="col-6 mt-3">
                          <div class="card">
                            <div class="card-body p-4">
                              <div class="row">
                                <div class="col-9">
                                  <div>
                                    <h5 class="mb-4">Drop Type*</h5>
                                  </div>

                                  <div *ngFor="let dropType of DropTypes" class="row">
                                    <div class="col-8">
                                      <label  class="pickupdetails_list">
                                        <input
                                         [value]="dropType.pk_id"
                                         type="radio" 
                                        (click)="DropOptionSelection(dropType)"
                                        [(ngModel)]="selectedDropOption"/>
                                        {{dropType.pk_name}}
                                      </label>
                                    </div>
                                    <div class="col-4">
                                      <p style="color: #26c20e" *ngIf="dropType.pk_freeFlag == 1" class="pickupdetails_list">FREE</p>
                                      <p style="color: #f7941e" class="pickupdetails_list" *ngIf="dropType.pk_freeFlag == 0 && dropCost!=0">{{dropCost}}</p>
                                      <p style="color: #f7941e" class="pickupdetails_list" *ngIf="dropType.pk_freeFlag == 0 && dropCost==0">PAID</p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        
                      </div>

                      <div class="row">
                        <div class="col-12 mt-3">
                          <div class="row">
                            <div class="col-xl-6 col-12">
                              <div class="card">
                                <div class="card-body">
                                  <div class="p-2">
                                    <h5>Select Drop Date</h5>
                                  </div>

                                  <div class="py-3">
                                    <div>
                                      <div class="mt-1" style="display: flex; align-items: center; justify-content: center;">
                                        <!-- <div (click)="picker.open()" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0;"> -->
                                        <input
                                          class="form-control"
                                          matInput
                                          [matDatepicker]="picker"
                                          (dateChange)="ondateSelection()"
                                          placeholder="Choose a booking date"
                                          name="bookingDate"
                                          [min]="minSelectableDate"
                                          [max]="maxSelectableDate"
                                          [(ngModel)]="bookingDate"
                                          #bookingDateRef="ngModel"
                                          required
                                          (click)="picker.open()"
                                          style="position: relative; z-index: 1; pointer-events: none;"
                                        />
              
                                        <mat-datepicker-toggle
                                          matSuffix
                                          [for]="picker"
                                        ></mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="col-xl-6 col-12">
                              <div class="card">
                                <div class="card-body">
                                  <div class="p-2">
                                    <h5>Select Drop Time Slot</h5>
                                  </div>

                                  <div class="py-4">
                                    <ng-select
                                      [(ngModel)]="booking_slot"
                                      selected="booking_slot"
                                    >
                                      <ng-option [value]="0"
                                        >Select Time slot</ng-option
                                      >
                                      <ng-option
                                        *ngFor="let eachslot of timeslots"
                                        [value]="eachslot.tm_id"
                                        (click) = 'timeselect(eachslot)'
                                        [disabled]="eachslot.isTimeSlotFilled"
                                      >
                                        <div
                                          style="
                                            display: flex;
                                            justify-content: space-between;
                                            align-items: center;
                                          "
                                        >
                                          <span
                                            >{{ eachslot.startTime }} -
                                            {{ eachslot.endTime }}</span
                                          >
                                          <span
                                            *ngIf="eachslot.isTimeSlotFilled"
                                            class="badge"
                                            >Slot Full</span
                                          >
                                        </div>
                                      </ng-option>
                                    </ng-select>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="pay_btn mt-3">
                        <button (click)="noPaymentReschedule()" *ngIf="dropCost == 0">Schedule</button>
                        <button *ngIf="dropCost !=0">PAY</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
